CREATE TABLE `prueba2`.`usuario` (`ID` INT NOT NULL , `login` VARCHAR(25) NOT NULL , `password` VARCHAR(255) NOT NULL , `action` INT NOT NULL , `HP_character` INT NOT NULL , `HP_enemy` INT NOT NULL , `ID_enemy` INT NOT NULL , PRIMARY KEY (`ID`)) ENGINE = InnoDB;

CREATE TABLE `prueba2`.`tarea` (`ID` INT NOT NULL , `name` VARCHAR(50) NOT NULL , `detail` INT(255) NOT NULL , `initial_date` DATE NOT NULL , `limit_date` DATE NOT NULL , `again` INT NOT NULL , `important` BOOLEAN NOT NULL , `ID_user` INT NOT NULL , `ID_lista` INT NOT NULL , PRIMARY KEY (`ID`)) ENGINE = InnoDB;

CREATE TABLE `prueba2`.`subtarea` (`ID` INT NOT NULL , `name` VARCHAR(50) NOT NULL , `ID_tarea` INT NOT NULL , PRIMARY KEY (`ID`)) ENGINE = InnoDB;

CREATE TABLE `prueba2`.`lista` (`ID` INT NOT NULL , `name` VARCHAR(50) NOT NULL , PRIMARY KEY (`ID`)) ENGINE = InnoDB;

CREATE TABLE `prueba2`.`enemy` (`ID` INT NOT NULL , `type` BOOLEAN NOT NULL , `loot` INT NOT NULL , `damage` INT NOT NULL , PRIMARY KEY (`ID`)) ENGINE = InnoDB;

CREATE TABLE `prueba2`.`object` (`ID` INT NOT NULL , `type` INT NOT NULL , `ATK` INT NOT NULL , `DEF` INT NOT NULL , `HP` INT NOT NULL , `recoil` INT NOT NULL , `heal` INT NOT NULL , PRIMARY KEY (`ID`)) ENGINE = InnoDB;

CREATE TABLE `prueba2`.`equiped` (`ID_user` INT NOT NULL , `ID_object` INT NOT NULL , `equiped` BOOLEAN NOT NULL , PRIMARY KEY (`ID_user`, `ID_object`)) ENGINE = InnoDB;

CREATE TABLE `prueba2`.`locked` (`ID_user` INT NOT NULL , `ID_object` INT NOT NULL , `locked` BOOLEAN NOT NULL , PRIMARY KEY (`ID_user`, `ID_object`)) ENGINE = InnoDB;


ALTER TABLE `tarea` ADD `completed` BOOLEAN NOT NULL AFTER `detail`;

ALTER TABLE `tarea` ADD `reward` INT NOT NULL AFTER `detail`;

ALTER TABLE `tarea` CHANGE `detail` `detail` VARCHAR(255) NOT NULL;

ALTER TABLE `tarea` CHANGE `ID_lista` `ID_lista` INT(11) NULL;


ALTER TABLE `usuario` ADD FOREIGN KEY (`ID_enemy`) REFERENCES `enemy`(`ID`) ON DELETE RESTRICT ON UPDATE RESTRICT;

ALTER TABLE `tarea` ADD FOREIGN KEY (`ID_user`) REFERENCES `usuario`(`ID`) ON DELETE CASCADE ON UPDATE CASCADE; ALTER TABLE `tarea` ADD FOREIGN KEY (`ID_lista`) REFERENCES `lista`(`ID`) ON DELETE CASCADE ON UPDATE CASCADE;

ALTER TABLE `subtarea` ADD FOREIGN KEY (`ID_tarea`) REFERENCES `tarea`(`ID`) ON DELETE CASCADE ON UPDATE CASCADE;

ALTER TABLE `equiped` ADD FOREIGN KEY (`ID_object`) REFERENCES `object`(`ID`) ON DELETE CASCADE ON UPDATE CASCADE; ALTER TABLE `equiped` ADD FOREIGN KEY (`ID_user`) REFERENCES `usuario`(`ID`) ON DELETE CASCADE ON UPDATE CASCADE;

ALTER TABLE `locked` ADD FOREIGN KEY (`ID_object`) REFERENCES `object`(`ID`) ON DELETE CASCADE ON UPDATE CASCADE; ALTER TABLE `locked` ADD FOREIGN KEY (`ID_user`) REFERENCES `usuario`(`ID`) ON DELETE CASCADE ON UPDATE CASCADE;











